# Workflow pour mise √† jour automatique des articles de g√©om√©trie symplectique
name: Update Symplectic Geometry Papers Daily

# Contr√¥le quand le workflow s'ex√©cute
on:
  # Permet d'ex√©cuter manuellement depuis l'onglet Actions
  workflow_dispatch:
  
  # Planification automatique - tous les jours √† 6h00 UTC
  schedule:
    - cron: "0 6 * * *"  # Tous les jours √† 6h00 UTC
  
  # Optionnel: d√©clencher sur push vers main (d√©commentez si besoin)
  # push:
  #   branches:
  #     - main

env:
  GITHUB_USER_NAME: YassineAitMohamed  # Remplacez par votre nom d'utilisateur GitHub
  GITHUB_USER_EMAIL: y.aitmohamed@yahoo.com  # Remplacez par votre email GitHub

# Les jobs √† ex√©cuter
jobs:
  update-articles:
    name: Update Symplectic Articles
    runs-on: ubuntu-latest
    
    steps:
      # 1. Checkout du code
      - name: Checkout Repository
        uses: actions/checkout@v4
        
      # 2. Configuration de Python
      - name: Setup Python Environment
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
          
      # 3. Installation des d√©pendances
      - name: Install Dependencies
        run: |
          python -m pip install --upgrade pip
          pip install arxiv
          pip install requests
          pip install pyyaml
          pip install pandas
          pip install tqdm
          
      # 4. Ex√©cution du script de mise √† jour
      - name: Run Symplectic Articles Update
        run: |
          python update_articles.py
          
      # 5. Commit et push des changements
      - name: Commit and Push Changes
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "ü§ñ Auto-update: New symplectic geometry articles from arXiv"
          file_pattern: "index.html README.md articles_backup.json"
          commit_user_name: ${{ env.GITHUB_USER_NAME }}
          commit_user_email: ${{ env.GITHUB_USER_EMAIL }}
          
      # 6. Optionnel: Notification de succ√®s
      - name: Update Success Notification
        if: success()
        run: |
          echo "‚úÖ Symplectic geometry articles updated successfully!"
          echo "üìä Check the updated index.html for new articles"
          
      # 7. Optionnel: Notification d'√©chec  
      - name: Update Failed Notification
        if: failure()
        run: |
          echo "‚ùå Failed to update symplectic articles"
          echo "üîß Check the logs for debugging information"
